目前支持两种方式的元数据配置：<br />方式1:通过xml文件生成元数据<br />方式2为通过平台的配置页面生成元数据

<a name="c19ff2df"></a>
#### 方式1：XML方式
1.在ucf-mdf-domain/resource/meta-mpdels目录中定义元数据的xml文件<br />xml格式可参考项目中的**ucf_cus_quotation.xml**文件进行配置，文件详细说明如下：

```xml
<?xml version="1.0" encoding="utf-8"?>
<components xmlns="http://www.imeta.org/meta"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://www.imeta.org/meta http://upsms.yonyouup.com/meta.xsd">
    <references>
        <reference file="ucfbase.xml"/><!--引入的基础元数据文件，可以用来复用通用的属性-->
    </references>
    <!--component 组件标签，生成实体vo时相当于包路径为[moduleName.name]即:ucf.customer-->
    <!--domain 用于云端的服务挂载用,本地调试可不关注 -->
    <component name="customer" moduleName="ucf" title="客户报价单" domain="hpapaas">
        <!--主表定义，name为组件名称，可用于xml其他位置引用，tableName为生成数据库SQL时的表名-->
        <class name="CusQuotation" title="客户报价单" tableName="mdd_cus_quotation">
            <!--字段属性定义，主要属性如下：
            name：vo属性名
            columnName：数据库字段名，非持久化字段不加此属性
            title：字段名称
            iLength：字段长度
            isRequired：是否必填
            type：字段类型，基础类型有String，DateTime，Decimal(iPrecision.iScale)，Integer等，引用其他组件直接写组件包名+组件名
            -->
            <attributes>
                <attribute name="transactionType" columnName="transaction_type" type="bd.bill.TransType" title="交易类型" iLength="64" isTransactionType="true" isRequired="false"/>
                <attribute name="quotationNum" columnName="quotation_num" type="String" title="报价单号" iLength="64" isRequired="false" isCode="true"/>
                <attribute name="billDate" columnName="bill_date" type="DateTime" title="单据日期" isRequired="false"/>
                <attribute name="customerId" columnName="customer_id" type="aa.merchant.Merchant" title="客户档案ID" iLength="64" isRequired="false"/>
                <attribute name="cusContacts" columnName="cus_contacts" type="String" title="客户联系人" iLength="255" isRequired="false"/>
                <attribute name="cusContactsTel" columnName="cus_contacts_tel" type="String" title="客户联系人固定电话" iLength="255" isRequired="false"/>
                <attribute name="cusContactsMobil" columnName="cus_contacts_mobil" type="String" title="客户联系人手机号" iLength="255" isRequired="false"/>
                <attribute name="salesman" columnName="salesman_id" type="bd.staff.Staff" title="销售业务员" iLength="64" isRequired="false"/>
                <attribute name="transCurrency" columnName="trans_currency_id" type="bd.currencytenant.CurrencyTenantVO" title="交易币种" iLength="64" isRequired="false"/>
                <attribute name="localCurrency" columnName="local_currency_id" type="bd.currencytenant.CurrencyTenantVO" title="本币" iLength="64" isRequired="false"/>
                <attribute name="exchangeRate" columnName="exchange_rate" type="bd.exchangeRate.ExchangeRateVO" title="汇率" iLength="64" isRequired="false"/>
                <attribute name="taxFreeAmount" columnName="tax_free_amount" type="Decimal" title="无税金额" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="taxAmount" columnName="tax_amount" type="Decimal" title="税额" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="valueTaxTotal" columnName="value_tax_total" type="Decimal" title="价税合计" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="taxFreeInLocal" columnName="tax_free_in_local" type="Decimal" title="本币无税金额" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="taxInLocal" columnName="tax_in_local" type="Decimal" title="本币税额" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="valueTaxInLocal" columnName="value_tax_in_local" type="Decimal" title="本币价税合计" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="memo" columnName="memo" type="String" title="备注" iLength="255" isRequired="false"/>
                <attribute name="inquiryOrg" columnName="inquiry_org_id" type="bd.adminOrg.SalesOrgVO" title="询价组织" iLength="64" isMasterOrg="true" isRequired="false"/>
                <attribute name="inquiryDept" columnName="inquiry_dept_id" type="bd.adminOrg.AdminOrgVO" title="询价部门" iLength="64" isRequired="false"/>
                <attribute name="customerVIP" columnName="customer_vip" type="Integer" title="客户VIP属性" iLength="64" isRequired="false"/>

                <!--子表属性，没有columnName属性，不会加入建表sql，仅用于标识主子表关系-->
                <attribute name="materielList" title="询价物料列表" type="ucf.customer.CusQuotationMateriel"/>
            </attributes>
        </class>
        <!--子表 -->
        <class name="CusQuotationMateriel" title="客户报价单物料" tableName="mdd_cus_quotation_materiel">
            <attributes>
                <attribute name="materielId" columnName="materiel_id" type="aa.product.Product" title="物料ID" iLength="64" isRequired="false"/>
                <attribute name="materielNum" columnName="materiel_num" type="String" title="物料编号" iLength="64" isRequired="false"/>
                <attribute name="unitName" columnName="unit_name" type="String" title="主单位名称" iLength="64" isRequired="false"/>
                <attribute name="skuId" columnName="sku_id" type="String" title="物料SKU_ID" iLength="64" isRequired="false"/>
                <attribute name="skuNum" columnName="sku_num" type="String" title="物料SKU编号" iLength="64" isRequired="false"/>
                <attribute name="skuName" columnName="sku_name" type="String" title="物料SKU名称" iLength="64" isRequired="false"/>
                <attribute name="quantity" columnName="quantity" type="Decimal" title="数量" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="inventoryQuantity" columnName="inventory_quantity" type="Decimal" title="库存数量" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="inventoryUnit" columnName="inventory_unit" type="String" title="库存单位" iLength="64" isRequired="false"/>
                <attribute name="valuationQuantity" columnName="valuation_quantity" type="Decimal" title="计价数量" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="valuationUnit" columnName="valuation_unit" type="String" title="计价单位" iLength="64" isRequired="false"/>
                <attribute name="taxFreePrice" columnName="tax_free_price" type="Decimal" title="无税单价" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="taxRate" columnName="tax_rate" type="Decimal" title="税率" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="taxPrice" columnName="tax_price" type="Decimal" title="含税单价" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="taxFreeAmount" columnName="tax_free_amount" type="Decimal" title="无税金额" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="taxAmount" columnName="tax_amount" type="Decimal" title="税额" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="valueTaxTotal" columnName="value_tax_total" type="Decimal" title="价税合计" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="taxFreePriceInLocal" columnName="tax_free_price_in_local" type="Decimal" title="本币无税单价" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="taxPriceInLocal" columnName="tax_price_in_local" type="Decimal" title="本币含税单价" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="taxFreeInLocal" columnName="tax_free_in_local" type="Decimal" title="本币无税金额" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="taxInLocal" columnName="tax_in_local" type="Decimal" title="本币税额" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="valueTaxInLocal" columnName="value_tax_in_local" type="Decimal" title="本币价税合计" iPrecision="11" iScale="6" isRequired="false"/>
                <attribute name="buyer" columnName="buyer" type="bd.staff.Staff" title="采购员/专管员" iLength="255" isRequired="false"/>
                <attribute name="memo" columnName="memo" type="String" title="备注" iLength="255" isRequired="false"/>

                <!-- 主表信息 -->
                <attribute name="cusQuotationId" columnName="cus_quotation_id" title="客户报价单主键" type="ucf.customer.CusQuotation"/>

            </attributes>
        </class>
        <!--实现的接口列表 supplier为要实现的接口，client为要实现接口的组件-->
        <realizations>
            <realization supplier="ucfbase.ucfbaseItf.IAutoCode" client="CusQuotation"/>
            <realization supplier="ucfbase.ucfbaseItf.IApprovalFlow" client="CusQuotation"/>
        </realizations>
        <!--继承的父组件列表，用来复用通用的一些属性如ID等-->
        <generalizations>
            <generalization parent="ucfbase.entity.BizObject" child="CusQuotation"/>
            <generalization parent="ucfbase.entity.BizObject" child="CusQuotationMateriel"/>
        </generalizations>
       <!--组件之间的组合关系
        type：表示对应关系类型，默认：composition
        typeB：主表组件名，roleB：从表中的主表关联属性
        typeA：从表组件名，roleA：主表中的从表关联属性
        roleAMulti：对应的表示1，1..n，n..n关联关系
        -->
        <associations>
        <association type="composition" typeB="CusQuotation" roleB="cusQuotationId" typeA="CusQuotationMateriel" roleA="materielList"
                     roleAMulti="1..n"/>
    </associations>
    </component>
</components>

```
2.生成建表SQL<br />打开ucf-mdf-tools下的TableBuildTest，修改appNames为**ucf_cus_quotation.xml**文件中**component**标签中定义的包名：

```java
 String appNames = "ucf.customer";
```

执行TableBuildTest，会在ucf-mdf-conf/resources/tpl-config.properties文件中配置的目录下生成sql脚本<br />![image.png](http://design.yonyoucloud.com/static/yuque/0/2019/png/459064/1566543963242-b97ff2a8-ec4f-4530-8716-7bb1fad4fb36.png#align=left&display=inline&height=96&name=image.png&originHeight=96&originWidth=280&size=4315&status=done&width=280)<br />然后在数据库中执行该建表SQL脚本；

<a name="9131dc31"></a>
#### 方式2：设计器方式

1. 方式2为通过平台的配置页面生成元数据，都是通过界面化的配置
1. 详细建模说明待补充