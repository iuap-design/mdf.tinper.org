> 创建者：姚磊

> 创建时间：2019-05-12
> 修改者：
> 修改时间：


<a name="eonOY"></a>
## 初识协议

- 协议Mock接口：[https://mock.yonyoucloud.com/mock/717/rendersdk](https://mock.yonyoucloud.com/mock/717/rendersdk)
- 协议详细信息如下：

```css
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "viewmodel": {
      "iBillId": 1000110191,
      "cBillName": "消息列表",
      "cBillNo": "aa_messagelist",
      "cFilterId": "5863614",
      "cBillType": "ArchiveList",
      "cSubId": "AA",
      "bBatchOperate": true,
      "entities": [
        {
          "cCode": "aa_messagelist",
          "cEntityName": "消息列表",
          "cType": "Bill",
          "cDataSourceName": "aa.message.Message",
          "cPrimaryKey": "id",
          "iBillEntityId": 167578,
          "bMain": true,
          "cControlType": "Table",
          "fields": [
            {
              "cFieldName": "tenant",
              "cItemName": "tenant",
              "cCaption": "租户ID",
              "cShowCaption": "租户ID",
              "iBillEntityId": 167578,
              "iBillTplGroupId": 5366273,
              "iTplId": 121582,
              "iMaxLength": 255,
              "iFieldType": 1,
              "bEnum": false,
              "bMustSelect": true,
              "bHidden": true,
              "bShowZero": true,
              "bSplit": false,
              "bExtend": false,
              "bCanModify": true,
              "iMaxShowLen": 255,
              "iColWidth": 150,
              "bNeedSum": false,
              "bShowIt": false,
              "bFilter": false,
              "bIsNull": true,
              "bPrintCaption": false,
              "bJointQuery": false,
              "bPrintUpCase": false,
              "bSelfDefine": false,
              "cTplGroupName": "Table",
              "bMain": true,
              "cDataSourceName": "aa.message.Message",
              "cControlType": "Input",
              "bVmExclude": 0,
              "iOrder": 0,
              "isshoprelated": false,
              "iSystem": 1,
              "authLevel": 3,
              "isExport": false,
              "iAlign": 1
            },
            {
              "cFieldName": "status",
              "cItemName": "status",
              "cCaption": "状态",
              "iBillEntityId": 167578,
              "iBillTplGroupId": 5366273,
              "iTplId": 121582,
              "iMaxLength": 255,
              "iFieldType": 1,
              "bEnum": true,
              "cEnumString": "{\"true\":\"已读\",\"false\":\"未读\"}",
              "enumArray": "[{\"nameType\":\"icon\",\"icon\":\"read\",\"value\":\"已读\",\"key\":\"true\"},{\"nameType\":\"icon\",\"icon\":\"unread\",\"value\":\"未读\",\"key\":\"false\"}]",
              "cEnumType": "aa_messageliststatus",
              "bMustSelect": true,
              "bHidden": false,
              "bShowZero": true,
              "bSplit": false,
              "bExtend": false,
              "bCanModify": true,
              "iMaxShowLen": 255,
              "iColWidth": 6,
              "bNeedSum": false,
              "bShowIt": true,
              "bFilter": false,
              "bIsNull": true,
              "bPrintCaption": false,
              "bJointQuery": false,
              "bPrintUpCase": false,
              "bSelfDefine": false,
              "cTplGroupName": "Table",
              "bMain": true,
              "cDataSourceName": "aa.message.Message",
              "cControlType": "select",
              "bVmExclude": 0,
              "iOrder": 1,
              "isshoprelated": false,
              "iSystem": 1,
              "authLevel": 3,
              "isExport": true,
              "iAlign": 1
            },
            {
              "cFieldName": "content",
              "cItemName": "content",
              "cCaption": "消息内容",
              "cShowCaption": "消息内容",
              "iBillEntityId": 167578,
              "iBillTplGroupId": 5366273,
              "iTplId": 121582,
              "iMaxLength": 255,
              "iFieldType": 1,
              "bEnum": false,
              "bMustSelect": true,
              "bHidden": false,
              "bShowZero": true,
              "bSplit": false,
              "bExtend": false,
              "bCanModify": true,
              "iMaxShowLen": 255,
              "iColWidth": 800,
              "bNeedSum": false,
              "bShowIt": true,
              "bFilter": true,
              "bIsNull": true,
              "bPrintCaption": false,
              "bJointQuery": true,
              "bPrintUpCase": false,
              "bSelfDefine": false,
              "cTplGroupName": "Table",
              "bMain": true,
              "cDataSourceName": "aa.message.Message",
              "cControlType": "Input",
              "bVmExclude": 0,
              "iOrder": 5,
              "isshoprelated": false,
              "iSystem": 1,
              "authLevel": 3,
              "isExport": true,
              "iAlign": 1
            },
            {
              "cFieldName": "sendTime",
              "cItemName": "sendTime",
              "cCaption": "推送时间",
              "cShowCaption": "推送时间",
              "iBillEntityId": 167578,
              "iBillTplGroupId": 5366273,
              "iTplId": 121582,
              "iMaxLength": 255,
              "iFieldType": 1,
              "bEnum": false,
              "bMustSelect": true,
              "bHidden": false,
              "bShowZero": true,
              "bSplit": false,
              "bExtend": false,
              "bCanModify": true,
              "iMaxShowLen": 255,
              "iColWidth": 200,
              "bNeedSum": false,
              "bShowIt": true,
              "bFilter": true,
              "bIsNull": true,
              "bPrintCaption": false,
              "bJointQuery": false,
              "bPrintUpCase": false,
              "bSelfDefine": false,
              "cOrder": "desc",
              "cTplGroupName": "Table",
              "bMain": true,
              "cDataSourceName": "aa.message.Message",
              "cControlType": "Input",
              "bVmExclude": 0,
              "iOrder": 10,
              "isshoprelated": false,
              "iSystem": 1,
              "authLevel": 3,
              "isExport": true,
              "iAlign": 1
            },
            {
              "cFieldName": "pubts",
              "cItemName": "pubts",
              "cCaption": "时间戳",
              "cShowCaption": "时间戳",
              "iBillEntityId": 167578,
              "iBillTplGroupId": 5366273,
              "iTplId": 121582,
              "iMaxLength": 255,
              "iFieldType": 1,
              "bEnum": false,
              "bMustSelect": true,
              "bHidden": true,
              "bShowZero": true,
              "bSplit": false,
              "bExtend": false,
              "bCanModify": true,
              "iMaxShowLen": 255,
              "iColWidth": 150,
              "bNeedSum": false,
              "bShowIt": false,
              "bFilter": false,
              "bIsNull": true,
              "bPrintCaption": false,
              "bJointQuery": false,
              "bPrintUpCase": false,
              "bSelfDefine": false,
              "cTplGroupName": "Table",
              "bMain": true,
              "cDataSourceName": "aa.message.Message",
              "cControlType": "Input",
              "bVmExclude": 0,
              "iOrder": 20,
              "isshoprelated": false,
              "iSystem": 1,
              "authLevel": 3,
              "isExport": false,
              "iAlign": 1
            },
            {
              "cFieldName": "subscription.menucode",
              "cItemName": "menucode",
              "cCaption": "菜单",
              "cShowCaption": "菜单",
              "iBillEntityId": 167578,
              "iBillTplGroupId": 5366273,
              "iTplId": 121582,
              "iMaxLength": 255,
              "iFieldType": 1,
              "bEnum": false,
              "bMustSelect": true,
              "bHidden": true,
              "bShowZero": true,
              "bSplit": false,
              "bExtend": false,
              "bCanModify": false,
              "iMaxShowLen": 255,
              "iColWidth": 150,
              "bNeedSum": false,
              "bShowIt": false,
              "bFilter": false,
              "bIsNull": true,
              "bPrintCaption": false,
              "bJointQuery": false,
              "bPrintUpCase": false,
              "bSelfDefine": false,
              "cTplGroupName": "Table",
              "bMain": true,
              "cDataSourceName": "aa.message.Message",
              "cControlType": "Input",
              "bVmExclude": 0,
              "iOrder": 25,
              "isshoprelated": false,
              "iSystem": 1,
              "authLevel": 3,
              "isExport": false,
              "iAlign": 1
            },
            {
              "cFieldName": "id",
              "cItemName": "id",
              "cCaption": "ID",
              "cShowCaption": "ID",
              "iBillEntityId": 167578,
              "iBillTplGroupId": 5366273,
              "iTplId": 121582,
              "iMaxLength": 255,
              "iFieldType": 1,
              "bEnum": false,
              "bMustSelect": true,
              "bHidden": true,
              "bShowZero": true,
              "bSplit": false,
              "bExtend": false,
              "bCanModify": false,
              "iMaxShowLen": 255,
              "iColWidth": 150,
              "bNeedSum": false,
              "bShowIt": false,
              "bFilter": false,
              "bIsNull": true,
              "bPrintCaption": false,
              "bJointQuery": false,
              "bPrintUpCase": false,
              "bSelfDefine": false,
              "cTplGroupName": "Table",
              "bMain": true,
              "cDataSourceName": "aa.message.Message",
              "cControlType": "Input",
              "bVmExclude": 0,
              "iOrder": 25,
              "isshoprelated": false,
              "iSystem": 1,
              "authLevel": 3,
              "isExport": true,
              "iAlign": 1
            },
            {
              "cFieldName": "subscription",
              "cItemName": "subscription",
              "cCaption": "订阅ID",
              "cShowCaption": "订阅ID",
              "iBillEntityId": 167578,
              "iBillTplGroupId": 5366273,
              "iTplId": 121582,
              "iMaxLength": 255,
              "iFieldType": 1,
              "bEnum": false,
              "bMustSelect": true,
              "bHidden": true,
              "bShowZero": true,
              "bSplit": false,
              "bExtend": false,
              "bCanModify": false,
              "iMaxShowLen": 255,
              "iColWidth": 150,
              "bNeedSum": false,
              "bShowIt": false,
              "bFilter": false,
              "bIsNull": true,
              "bPrintCaption": false,
              "bJointQuery": false,
              "bPrintUpCase": false,
              "bSelfDefine": false,
              "cTplGroupName": "Table",
              "bMain": true,
              "cDataSourceName": "aa.message.Message",
              "cControlType": "Input",
              "bVmExclude": 0,
              "iOrder": 25,
              "isshoprelated": false,
              "iSystem": 1,
              "authLevel": 3,
              "isExport": false,
              "iAlign": 1
            }
          ]
        }
      ],
      "actions": [
        {
          "cCommand": "cmdDelete",
          "cAction": "batchdelete",
          "cSvcUrl": "/bill/batchdelete.do",
          "cHttpMethod": "POST"
        },
        {
          "cCommand": "cmdList",
          "cAction": "list",
          "cSvcUrl": "/bill/list.do",
          "cHttpMethod": "POST"
        },
        {
          "cCommand": "cmdReadStatus",
          "cAction": "batchread",
          "cSvcUrl": "/bill/batchDo.do",
          "cHttpMethod": "POST"
        }
      ]
    },
    "viewApplication": {
      "billid": 1000110191,
      "cBillName": "消息列表",
      "cBillType": "ArchiveList",
      "cBillNo": "aa_messagelist",
      "bAllowMultiTpl": false,
      "cSubId": "AA",
      "cCardKey": "aa_messagelist",
      "view": {
        "iTplId": 121582,
        "cTemplateName": "消息列表显示模板",
        "iTplMode": 0,
        "iWidth": 10000,
        "cTemplateTitle": "消息列表",
        "containers": [
          {
            "groupId": 5366271,
            "cName": "ListHeader",
            "iOrder": 1,
            "bMain": true,
            "cCode": "aa_messagelist",
            "cDataSourceName": "aa.message.Message",
            "cControlType": "ListHeader",
            "cGroupCode": "ListHeader_1",
            "cAlign": "top",
            "iCols": 0,
            "containers": [
              {
                "groupId": 5366272,
                "parentId": 5366271,
                "cName": "ConvenientQuery",
                "iOrder": 2,
                "bMain": true,
                "cCode": "aa_messagelist",
                "cDataSourceName": "aa.message.Message",
                "cControlType": "ConvenientQuery",
                "cGroupCode": "ConvenientQuery_2",
                "cAlign": "top",
                "iCols": 0
              }
            ]
          },
          {
            "groupId": 5366273,
            "cName": "Table",
            "iOrder": 3,
            "bMain": true,
            "cCode": "aa_messagelist",
            "cDataSourceName": "aa.message.Message",
            "cControlType": "Table",
            "cGroupCode": "Table_3",
            "cAlign": "center",
            "iCols": 0,
            "controls": [
              {
                "cItemName": "status",
                "cCaption": "状态",
                "iMaxLength": 255,
                "iFieldType": 1,
                "bEnum": true,
                "cEnumString": "{\"true\":\"已读\",\"false\":\"未读\"}",
                "bMustSelect": true,
                "bHidden": false,
                "bSplit": false,
                "bExtend": false,
                "bCanModify": true,
                "iMaxShowLen": 255,
                "iColWidth": 6,
                "iAlign": 1,
                "bNeedSum": false,
                "bShowIt": true,
                "bFilter": false,
                "bIsNull": true,
                "bPrintCaption": false,
                "bJointQuery": false,
                "bPrintUpCase": false,
                "bSelfDefine": false,
                "cControlType": "select",
                "iOrder": 1,
                "bMain": true,
                "id": 6307253,
                "bVmExclude": 0,
                "iBillTplGroupId": 5366273,
                "iBillId": 1000110191,
                "iBillEntityId": 167578,
                "iTplId": 121582,
                "cSubId": "AA",
                "iSystem": 1,
                "cName": "status",
                "cFieldName": "status",
                "authLevel": 3,
                "cDataSourceName": "aa.message.Message",
                "enterDirection": 4,
                "cEnumType": "aa_messageliststatus",
                "bShowZero": true
              },
              {
                "cItemName": "content",
                "cCaption": "消息内容",
                "cShowCaption": "消息内容",
                "iMaxLength": 255,
                "iFieldType": 1,
                "bEnum": false,
                "bMustSelect": true,
                "bHidden": false,
                "bSplit": false,
                "bExtend": false,
                "bCanModify": true,
                "iMaxShowLen": 255,
                "iColWidth": 800,
                "iAlign": 1,
                "bNeedSum": false,
                "bShowIt": true,
                "bFilter": true,
                "bIsNull": true,
                "bPrintCaption": false,
                "bJointQuery": true,
                "bPrintUpCase": false,
                "bSelfDefine": false,
                "cControlType": "Input",
                "iOrder": 5,
                "bMain": true,
                "id": 6307251,
                "bVmExclude": 0,
                "iBillTplGroupId": 5366273,
                "iBillId": 1000110191,
                "iBillEntityId": 167578,
                "iTplId": 121582,
                "cSubId": "AA",
                "iSystem": 1,
                "cName": "content",
                "cFieldName": "content",
                "authLevel": 3,
                "cDataSourceName": "aa.message.Message",
                "enterDirection": 4,
                "bShowZero": true
              },
              {
                "cItemName": "sendTime",
                "cCaption": "推送时间",
                "cShowCaption": "推送时间",
                "iMaxLength": 255,
                "iFieldType": 1,
                "bEnum": false,
                "bMustSelect": true,
                "bHidden": false,
                "bSplit": false,
                "bExtend": false,
                "bCanModify": true,
                "iMaxShowLen": 255,
                "iColWidth": 200,
                "iAlign": 1,
                "bNeedSum": false,
                "bShowIt": true,
                "bFilter": true,
                "bIsNull": true,
                "bPrintCaption": false,
                "bJointQuery": false,
                "bPrintUpCase": false,
                "bSelfDefine": false,
                "cControlType": "Input",
                "iOrder": 10,
                "bMain": true,
                "id": 6307252,
                "bVmExclude": 0,
                "iBillTplGroupId": 5366273,
                "iBillId": 1000110191,
                "iBillEntityId": 167578,
                "iTplId": 121582,
                "cSubId": "AA",
                "iSystem": 1,
                "cName": "sendTime",
                "cFieldName": "sendTime",
                "authLevel": 3,
                "cDataSourceName": "aa.message.Message",
                "enterDirection": 4,
                "bShowZero": true
              }
            ]
          }
        ]
      },
      "extscripturls": []
    }
  }
}
```


<a name="ly9R3"></a>
## 示例：获取演示系统协议

**请求接口：**<br />[http://uretailmobile.yonyouup.com/uniform/billmeta/getbill?billno=aa_messagelist&bIncludeViewModel=true&terminalType=3&token=c326ca9afd58427488336e2803320678](http://uretailmobile.yonyouup.com/uniform/billmeta/getbill?billno=aa_messagelist&bIncludeViewModel=true&terminalType=3&token=c326ca9afd58427488336e2803320678)<br />注：请求前将[https://retail.yonyoucloud.com](https://retail.yonyoucloud.com/)试用账号获取到的token替换到上面的链接中

**接口返回值：**
```json
{
	"code": 200,
	"message": "操作成功",
	"data": {
		"viewmodel": {
			"iBillId": 1000066578,
			"cBillName": "消息列表",
			"cBillNo": "aa_messagelist",
			"cFilterId": "3450016",
			"cBillType": "ArchiveList",
			"cSubId": "AA",
			"bBatchOperate": true,
			"entities": [{
				"cCode": "aa_messagelist",
				"cEntityName": "消息列表",
				"cType": "Bill",
				"cDataSourceName": "aa.message.Message",
				"cPrimaryKey": "id",
				"iBillEntityId": 93787,
				"bMain": true,
				"cControlType": "Table",
				"fields": [{
					"cFieldName": "tenant",
					"cItemName": "tenant",
					"cCaption": "租户ID",
					"cShowCaption": "租户ID",
					"iBillEntityId": 93787,
					"iBillTplGroupId": 3413458,
					"iTplId": 72934,
					"iMaxLength": 255,
					"iFieldType": 1,
					"bEnum": false,
					"bMustSelect": true,
					"bHidden": true,
					"bSplit": false,
					"bExtend": false,
					"bCanModify": true,
					"iMaxShowLen": 255,
					"iColWidth": 150,
					"bNeedSum": false,
					"bShowIt": false,
					"bFilter": false,
					"bIsNull": true,
					"bPrintCaption": false,
					"bJointQuery": false,
					"bPrintUpCase": false,
					"bSelfDefine": false,
					"cTplGroupName": "Table",
					"bMain": true,
					"cDataSourceName": "aa.message.Message",
					"cControlType": "Input",
					"bVmExclude": 0,
					"iOrder": 0,
					"isshoprelated": false,
					"iSystem": 1,
					"authLevel": 3,
					"isExport": false
				}],
        "key": "Entity.Toolbarst_storeoutlogistic_toolbar_data_edit",
				"parentKey": "st_storeoutlogistic_toolbar_data_edit"
			}],
			"actions": [{
				"cCommand": "cmdDelete",
				"cAction": "batchdelete",
				"cSvcUrl": "/bill/batchdelete.do",
				"cHttpMethod": "POST",
        "cTarget": "st_storeoutlogistic_toolbar_data_edit"
			}],
      "states": [{
				"cCode": "editonaudit",
				"cCondition": "data.verifystate \u003d\u003d 100 \u0026\u0026 mode \u003d\u003d \u0027edit\u0027",
				"items": [{
					"bVisible": true,
					"bEnable": true,
					"cName": "btnDelete",
					"cGroup": "toolbaritem"
				}]
			}]
		},
		"viewApplication": {}
	}
}
```


<a name="V02WF"></a>
## 总体结构示例
<a name="4edb8252"></a>
### 店存出库单列表 （**st_storeoutlist**）
**1、结构图**


![](http://design.yonyoucloud.com/static/yuque/0/2019/png/271336/1564628702655-55386d6f-8f87-4498-a2d5-3135efeef16c.png)
**2、渲染图**<br />**![image.png](http://design.yonyoucloud.com/static/yuque/0/2019/png/271337/1552028496763-a23b2d06-aed7-4ef5-945a-edab23790c14.png#align=left&display=inline&height=572&name=image.png&originHeight=572&originWidth=1480&size=137743&status=done&width=1480)**<br />**
<a name="9711b2a7"></a>
### 店存出库单 （**st_storeout**）
**1、结构图**
![](http://design.yonyoucloud.com/static/yuque/0/2019/png/271336/1564628702836-66c8f161-233f-4e97-bf95-642ad1015598.png)**2、渲染图**<br />**![image.png](http://design.yonyoucloud.com/static/yuque/0/2019/png/271337/1552027897822-f3217a3a-7ac6-4f2b-ac36-cc08fe7a4146.png#align=left&display=inline&height=428&name=image.png&originHeight=850&originWidth=1482&size=78859&status=done&width=746)**

<a name="4a41324c"></a>
### **门店等级（****aa_storelevel****）**
**1、结构图**

![](http://design.yonyoucloud.com/static/yuque/0/2019/png/271336/1564628702871-8c8d2a34-46d0-4d6e-9d46-b074bc70647d.png)
**2、渲染图**<br />**![image.png](http://design.yonyoucloud.com/static/yuque/0/2019/png/271337/1552099739051-502fe592-81cc-4edd-87f2-6f4b00d525fe.png#align=left&display=inline&height=296&name=image.png&originHeight=296&originWidth=689&size=20972&status=done&width=689)**
<a name="8dee006e"></a>
### **收款单（**rm_gatheringvouch**）**
**
<a name="59441350"></a>
### 收款单列表（rm_gatheringvouchlist）


<a name="31cb8c11"></a>
##