> 修改：勾成图


模板配置同样有两种方式：

- 方式1:通过Excel生成模板
- 方式2为通过平台的设计器页面生成模板
<a name="0f0e6698"></a>
## 
<a name="5tXy9"></a>
## 模板配置

模板配置同样有两种方式：<br />方式1:通过Excel生成模板<br />方式2为通过平台的设计器页面生成模板

<a name="b47db927"></a>
#### 方式1：Excel方式

1. 因为要支持列表查询和卡片式编辑两种UI，所以需要配置两个excle文件分别用于生成列表和卡片两种UI
1. 在ucf-mdf-domain\scripts里查看列表和卡片demo文件，新建一个功能节点的页面只需要在模板Excel中更改几处即可，包括：

**cBillNo**：单据编号，要根据xml文件名进行替换，如之前定义的xml名称为ucf_cus_quotation.xml，则cBillNo需要更改为ucf_cus_quotationlist，注：**不是单个替换，需要将模板中的原cBillNo的值全部替换为ucf_cus_quotationlist**<br />**cDataSourceName**：数据源，根据xml中主表组件类名进行修改，例如ucf.customer.CusQuotation，主子表的需要在卡片模板中修改子表的数据源为xml中的子表组件类名，例如：ucf.customer.CusQuotationMateriel

3. 执行excel的宏，生成对应的UI数据sql，生成路径{excel所在目录}\UIExcel\UIExcelCreateSQL。
3. 执行scripts目录下replace.sh脚本替换租户（非必要步骤，只在租户ID为字符串时需要执行）

---


<a name="tmRqH"></a>
##### UI模板详解

1. UI模板数据表

> bill_base:UI模板数据注入口，记录模板的基础信息，如billNo，filterId，cardKey等
> billentity_base:UI包含的业务实体，可定义多个实体，通过isMain字段判断是否为主实体，dataSourceName 实体全类名
> billtemplate_base:UI模板表，用来确定模板组件的统一格式
> billtplgroup_base：模板组件Group表，用来确定包含其中的子组件的统一格式
> billitem_base：billentity_base包含实体属性列表，对应Grid或Card中的属性列，用来定义展示类型
> (Input,Enum,Ref)等
> pb_meta_filters：UI模板过滤器信息
> pb_filter_solution：UI模板过滤方案，支持用户自定义
> pb_filter_solution_common：pb_filter_solution过滤方案属性项，用来解释方案通过实体哪些字段过滤，如何过滤（like，=，<，>等）
> bill_toolbar：UI模板工具栏布局，如头部工具栏，底部工具栏，Grid工具栏等
> bill_toolbaritem：UI模板工具栏包含的按钮，关联bill_command
> bill_command：UI模板指令集，用来定义按钮执行的具体指令


2. 相关功能数据表

> bill_customerdef：用户自定义扩展脚本表
> bill_itemrule_*：Grid项自定义脚本，后端处理生成js文件返给前端执行，实现诸如多列求和、多列均值等操作
> bill_jointquery_*：联合查询，应用场景如bill_itemrule
> bill_process_*：工作流相关表，如系统已知的工作流，工作流包含的节点等
> bill_status_*：工作流节点状态相关表


---


<a name="49f1fac5"></a>
#### 方式2：设计器模式

使用文档<br />[https://www.yuque.com/docs/share/8c642f44-e2c7-413b-b714-4fccd041ca74](https://www.yuque.com/docs/share/8c642f44-e2c7-413b-b714-4fccd041ca74)